CREATE TABLE usuario (
	ID INTEGER NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(25) NOT NULL,
	EMAIL VARCHAR(25) NOT NULL,
	-- IMAGEM VARCHAR(50),
	PRIMARY KEY (ID)

);

CREATE TABLE amizade (
	IDUsuario INTEGER NOT NULL,
	IDAmigo INTEGER NOT NULL,
	PRIMARY KEY (IDUsuario, IDAmigo),
	FOREIGN KEY(IDUsuario)
		REFERENCES Usuario(ID)
		  	ON DELETE NO ACTION
		  		ON UPDATE NO ACTION,
	FOREIGN KEY(IDAmigo)
		REFERENCES usuario(ID)
		  	ON DELETE NO ACTION
		    	ON UPDATE NO ACTION
);

CREATE TABLE tipocerveja(
	IDTipo INTEGER NOT NULL AUTO_INCREMENT,
	NomeTipo VARCHAR(25) NOT NULL,
	PRIMARY KEY(IDTipo)
);


CREATE TABLE preferencias(
	IDUsuario INTEGER NOT NULL,
	IDTipo INTEGER NOT NULL,

	PRIMARY KEY(IDUsuario, IDTipo),
	FOREIGN KEY(IDUsuario)
		REFERENCES usuario(ID)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION,

	FOREIGN KEY(IDTipo)
		REFERENCES TipoCerveja(IDTipo)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION
);


CREATE TABLE notificacao(
	IDUsuario INTEGER NOT NULL,
	TIPO VARCHAR(25) NOT NULL,
	TEXTO VARCHAR(280) NOT NULL,

	PRIMARY KEY(IDUsuario),
	FOREIGN KEY(IDUsuario)
		REFERENCES usuario(ID)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION
);

CREATE TABLE cerveja (
	NOME VARCHAR(25) NOT NULL,
	IDTipo INT NOT NULL,
	Imagem VARCHAR(50),

	PRIMARY KEY (NOME),
	FOREIGN KEY(IDTipo)
		REFERENCES TipoCerveja(IDTipo)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION
);

CREATE TABLE publicacao(
	IDPublicacao INT NOT NULL AUTO_INCREMENT,
	IDUsuario INT NOT NULL,
	NomeCerveja VARCHAR(25) NOT NULL,
	Localizacao VARCHAR(25),
	Imagem VARCHAR(50),
	Avaliacao INT NOT NULL,
	Data DATETIME NOT NULL,

	PRIMARY KEY (IDPublicacao),
	FOREIGN KEY(IDUsuario)
		REFERENCES Usuario(ID)
		  ON DELETE NO ACTION
		  	ON UPDATE NO ACTION,
	FOREIGN KEY(NomeCerveja)
		REFERENCES Cerveja(Nome)
		  ON DELETE NO ACTION
		  	ON UPDATE NO ACTION
);

CREATE TABLE marcacaopub(
	IDUsuario INTEGER NOT NULL,
	IDPublicacao INTEGER NOT NULL,

	PRIMARY KEY(IDUsuario, IDPublicacao),
	FOREIGN KEY(IDUsuario)
		REFERENCES usuario(ID)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION,

	FOREIGN KEY(IDPublicacao)
		REFERENCES Publicacao(IDPublicacao)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION
);

CREATE TABLE token(
	IDUsuario INTEGER NOT NULL,
	Token VARCHAR(25) NOT NULL,
	DataToken DATETIME NOT NULL,

	PRIMARY KEY(IDUsuario),
	FOREIGN KEY(IDUsuario)
		REFERENCES usuario(ID)
			ON DELETE NO ACTION
				ON UPDATE NO ACTION
);

INSERT INTO usuario(id, nome, email) VALUES (1, "Rodrigo Faria", "rodrigo.f.ss@uol.com.br");
INSERT INTO token(idusuario, token, datatoken) VALUES (1, '1)alskd', NOW());